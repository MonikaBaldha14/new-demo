Cart-drawer. Liquid
 
 {% if cart != empty %}
         <div id="cart-recommendations" class="cart-recommendation">
            <h3 class="cart-recommendations__title">
              You may also like
            </h3>
            <div id="cart-recommendations" class="cart-recommendations-product-slider swiper">
              <div class="swiper-wrapper"></div>
              <!-- Navigation arrows -->
              <div class="swipper_arrows">
                <div class="cart-rec-prev"></div>
                <div class="cart-rec-next"></div>
              </div>
            </div>
          </div>
        {% endif %}
 
 
Cart-drawer.js
 
class CartDrawer extends HTMLElement {
  constructor() {
    super();
 
    this.addEventListener('keyup', e => e.code === 'Escape' && this.close());
    this.querySelector('#CartDrawer-Overlay')?.addEventListener('click', this.close.bind(this));
 
    this.setHeaderCartIconAccessibility();
  }
 
  setHeaderCartIconAccessibility() {
    const cartLink = document.querySelector('#cart-icon-bubble');
    if (!cartLink) return;
 
    cartLink.setAttribute('role', 'button');
    cartLink.setAttribute('aria-haspopup', 'dialog');
 
    cartLink.addEventListener('click', e => {
      e.preventDefault();
      this.open(cartLink);
    });
 
    cartLink.addEventListener('keydown', e => {
      if (e.code.toUpperCase() === 'SPACE') {
        e.preventDefault();
        this.open(cartLink);
      }
    });
  }
 
  open(triggeredBy) {
    if (triggeredBy) this.activeElement = triggeredBy;
    this.classList.add('animate', 'active');
    document.body.classList.add('overflow-hidden');
 
    setTimeout(() => {
      fetch('/cart.js')
        .then(res => res.json())
        .then(cart => {
          if (!cart.items.length) return;
          const lastProductId = cart.items[cart.items.length - 1].product_id;
          loadCartDrawerRecommendations(lastProductId);
        });
    }, 100);
  }
 
  close() {
    this.classList.remove('active');
    document.body.classList.remove('overflow-hidden');
  }
 
  renderContents(parsedState) {
    this.querySelector('.drawer__inner')?.classList.remove('is-empty');
 
    this.getSectionsToRender().forEach(section => {
      const el = section.selector ? document.querySelector(section.selector) : document.getElementById(section.id);
      if (!el) return;
      el.innerHTML = this.getSectionInnerHTML(parsedState.sections[section.id], section.selector);
    });
 
    this.querySelector('#CartDrawer-Overlay')?.addEventListener('click', this.close.bind(this));
    this.open();
  }
 
  getSectionInnerHTML(html, selector = '.shopify-section') {
    return new DOMParser().parseFromString(html, 'text/html').querySelector(selector).innerHTML;
  }
 
  getSectionsToRender() {
    return [
      { id: 'cart-drawer', selector: '#CartDrawer' },
      { id: 'cart-icon-bubble' }
    ];
  }
  setActiveElement(element) {
    this.activeElement = element;
  }
 
}
 
customElements.define('cart-drawer', CartDrawer);
 
class CartDrawerItems extends CartItems {
  getSectionsToRender() {
    return [
      { id: 'CartDrawer', section: 'cart-drawer', selector: '.drawer__inner' },
      { id: 'cart-icon-bubble', section: 'cart-icon-bubble', selector: '.shopify-section' }
    ];
  }
}
 
customElements.define('cart-drawer-items', CartDrawerItems);
 
 
 
// Cart Drawer recommendation product
 
function formatMoney(cents, format = window.Shopify?.money_format || "{{amount}}") {
  if (typeof cents === 'string') cents = cents.replace('.', '');
  let value = (cents / 100).toFixed(2);
 
  return format
    .replace('{{amount}}', value)
    .replace('{{amount_no_decimals}}', Math.round(cents / 100))
    .replace('{{amount_with_comma_separator}}', value.replace('.', ','))
    .replace('{{amount_no_decimals_with_comma_separator}}', Math.round(cents / 100).toString().replace('.', ','));
}
 
const currencySymbol = '₹';
 
function formatMoney(cents) {
  if (!cents) return '';
  return currencySymbol + (cents / 100).toFixed(2);
}
 
 
function loadCartDrawerRecommendations(productId) {
  const container = document.getElementById('cart-recommendations');
  if (!container || !productId) return;
 
  const track = container.querySelector('.swiper-wrapper');
  if (!track) return;
 
  fetch(`/recommendations/products.json?product_id=${productId}&limit=8`)
    .then(res => res.json())
    .then(data => {
      if (!data.products?.length) {
        container.style.display = 'none';
        return;
      }
 
      container.style.display = 'block';
      track.innerHTML = '';
 
 
      data.products.forEach(product => {
        if (!product.variants?.length) return;
 
        track.insertAdjacentHTML('beforeend', `
          <div class="swiper-slide cart-recommendation-item">
            <div class="img-container">
              <img src="${product.featured_image}" alt="${product.title}">
            </div>
            <div class="content-container">
              <a href="/products/${product.handle}">
                <p class="title">${product.title}</p>
              </a>
              <p class="price">${formatMoney(product.price)}</p>
              <button class="recommandation_add_product" data-variant-id="${product.variants[0].id}">Add to cart</button>
            </div>
          </div>
        `);
      });
 
      setTimeout(() => {
        if (container.swiper) container.swiper.destroy(true, true);
 
        container.swiper = new Swiper('.cart-recommendations-product-slider', {
          slidesPerView: 2,
          slidesPerGroup: 1,
          spaceBetween: 10,
          freeMode: false,
 
          observer: true,
          observeParents: true,
 
          navigation: {
            nextEl: '.cart-rec-next',
            prevEl: '.cart-rec-prev',
          },
 
          on: {
            init(swiper) {
              swiper.update();
            },
            resize(swiper) {
              swiper.update();
            }
          }
        });
      }, 200);
 
    });
}
 
 
 
document.addEventListener('click', function (e) {
  const btn = e.target.closest('.recommandation_add_product');
  if (!btn) return;
 
  e.preventDefault();
 
  btn.disabled = true;
  btn.textContent = 'Adding to cart...';
 
  fetch('/cart/add.js', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Accept': 'application/json'
    },
    body: JSON.stringify({
      id: btn.dataset.variantId,
      quantity: 1
    })
  })
    .then(() => fetch('/?sections=cart-drawer,cart-icon-bubble'))
    .then(res => res.json())
    .then(sections => {
      const drawer = document.querySelector('cart-drawer');
      if (!drawer) return;
 
      drawer.renderContents({ sections });
      drawer.open();
    })
    .catch(() => {
      btn.disabled = false;
      btn.textContent = 'Add to cart';
    });
});
 
 
Top on the global.js
 
/* ================================
  GLOBAL – Cart Drawer Recommendation Reload
================================ */
 
window.reloadCartDrawerRecommendations = function () {
  fetch('/cart.js')
    .then(res => res.json())
    .then(cart => {
      if (!cart.items || !cart.items.length) return;
 
      const lastProductId =
        cart.items[cart.items.length - 1].product_id;
 
      if (typeof window.loadCartDrawerRecommendations === 'function') {
        window.loadCartDrawerRecommendations(lastProductId);
      }
    })
    .catch(err => {
      console.error('Recommendation reload failed', err);
    });
};
 
